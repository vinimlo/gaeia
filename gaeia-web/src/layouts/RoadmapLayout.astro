---
import BaseLayout from './BaseLayout.astro';
import ProgressRing from '../components/ProgressRing.astro';

interface Props {
  title: string;
  section?: string;
  description?: string;
  progress?: number;
  totalItems?: number;
  completedItems?: number;
}

const {
  title,
  section,
  description,
  progress = 0,
  totalItems = 0,
  completedItems = 0
} = Astro.props;
---

<BaseLayout title={title} description={description}>
  <article class="animate-fade-in">
    <!-- Header -->
    <header class="mb-8">
      {section && (
        <div class="flex items-center gap-2 mb-4">
          <span class="px-3 py-1 rounded-full bg-dendrite-violet/20 text-dendrite-violet text-sm font-medium">
            {section}
          </span>
        </div>
      )}

      <div class="flex items-start justify-between gap-6">
        <div class="flex-1">
          <h1 class="text-3xl md:text-4xl font-display font-bold text-bright mb-4">
            {title}
          </h1>

          {description && (
            <p class="text-dim text-lg leading-relaxed">
              {description}
            </p>
          )}
        </div>

        <!-- Progress Ring -->
        {totalItems > 0 && (
          <div class="flex-shrink-0">
            <ProgressRing value={progress} size={100} strokeWidth={8} />
            <div class="text-center mt-2">
              <span class="text-sm text-dim">
                {completedItems}/{totalItems}
              </span>
            </div>
          </div>
        )}
      </div>
    </header>

    <!-- Breadcrumb -->
    <nav class="mb-8" aria-label="Breadcrumb">
      <ol class="flex items-center gap-2 text-sm">
        <li>
          <a href="/roadmap" class="text-dim hover:text-synapse-cyan transition-colors">
            Roadmap
          </a>
        </li>
        <li class="text-faint">/</li>
        <li class="text-bright">{title}</li>
      </ol>
    </nav>

    <!-- Content -->
    <div class="markdown-content">
      <slot />
    </div>

    <!-- Back to Roadmap -->
    <nav class="mt-12 pt-8 border-t border-star-dust/50">
      <a
        href="/roadmap"
        class="inline-flex items-center gap-2 text-dim hover:text-dendrite-violet transition-colors"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Voltar ao Roadmap
      </a>
    </nav>
  </article>
</BaseLayout>
